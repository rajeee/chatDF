{"id":"chatDF-0ad","title":"Backend test infrastructure","description":"Set up pytest test infrastructure: tests/backend/conftest.py with shared fixtures (fresh in-memory SQLite db, test_user, test_session, authed_client via httpx.AsyncClient with ASGITransport, mock_worker_pool), tests/backend/factories.py with factory functions (make_user, make_session, make_conversation, make_message, make_dataset, make_token_usage, make_referral_key). Install pytest, pytest-asyncio, pytest-cov, pytest-httpx, httpx, freezegun.","acceptance_criteria":"pytest discovers test directory. conftest fixtures work (db creates schema, authed_client makes requests). Factory functions produce valid dicts with UUID ids and ISO timestamps.","notes":"Refs: spec/test_plan.md#test-data-strategy, spec/backend/test_plan.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:13:39.582601-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:40:00.791633-06:00","closed_at":"2026-02-05T19:40:00.791633-06:00","close_reason":"Test infra created, uv sync succeeds, pytest discovers tests dir. Fixed hatch build config.","dependencies":[{"issue_id":"chatDF-0ad","depends_on_id":"chatDF-r87","type":"blocks","created_at":"2026-02-05T19:20:30.962815-06:00","created_by":"radhikar"}]}
{"id":"chatDF-0cy","title":"Frontend: right panel components","description":"Implement right panel child components: DatasetInput.tsx (URL text field + Add button, debounced validation 300ms, client-side checks: empty/URL format/duplicate/at-limit, POST /conversations/:id/datasets, error display, spinner on submit, clear on success, disabled at limit), DatasetCard.tsx (loading state: hostname+progress bar, loaded state: tableName bold + dimensions, error state: red border+retry, remove button with confirmation, click opens SchemaModal), SchemaModal.tsx (editable table name input with blur/Enter save via PATCH, read-only dimensions, column list table with type mapping, 'Refresh Schema' button with spinner via POST refresh, close via X/Escape/backdrop). Write tests covering DI-*, DC-*, SM-* scenarios from right_panel/test_plan.md.","acceptance_criteria":"DatasetInput validates URLs client-side, submits, shows errors. DatasetCard shows all 3 states correctly, remove and retry work. SchemaModal shows schema, renames table, refreshes schema. All DI, DC, SM tests pass.","notes":"Refs: spec/frontend/right_panel/dataset_input/plan.md, spec/frontend/right_panel/dataset_card/plan.md, spec/frontend/right_panel/schema_modal/plan.md, spec/frontend/right_panel/test_plan.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:17:04.864759-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:13:35.603266-06:00","closed_at":"2026-02-05T20:13:35.603266-06:00","close_reason":"Implemented all three right panel components with 30 passing tests:\n\nDatasetInput.tsx (9 tests): URL validation (debounced 300ms), duplicate detection, 5-dataset limit, submit with API call, error display.\n\nDatasetCard.tsx (11 tests): Loading state with hostname + progress bar, ready state with formatted dimensions, error state with retry, remove with confirmation for loaded/no-confirm for error, click opens schema modal.\n\nSchemaModal.tsx (10 tests): Opens from uiStore, editable table name (blur/Enter saves), column list with friendly type mapping, refresh schema via API, close via Escape/backdrop/X button.\n\nRightPanel.tsx updated to compose all three components.\n\nFiles:\n- implementation/frontend/src/components/right-panel/DatasetInput.tsx\n- implementation/frontend/src/components/right-panel/DatasetCard.tsx\n- implementation/frontend/src/components/right-panel/SchemaModal.tsx\n- implementation/frontend/src/components/right-panel/RightPanel.tsx (updated)\n- tests/frontend/components/right-panel/datasetInput.test.tsx\n- tests/frontend/components/right-panel/datasetCard.test.tsx\n- tests/frontend/components/right-panel/schemaModal.test.tsx","dependencies":[{"issue_id":"chatDF-0cy","depends_on_id":"chatDF-yi5","type":"blocks","created_at":"2026-02-05T19:21:57.962094-06:00","created_by":"radhikar"}]}
{"id":"chatDF-0zw","title":"Backend: auth router","description":"Implement routers/auth.py: POST /auth/google (google_login), GET /auth/google/callback (google_callback), GET /auth/me (get_me with get_current_user dependency), POST /auth/logout (logout). Write tests first in tests/backend/rest_api/test_auth_endpoints.py covering AUTH-EP-1 through AUTH-EP-9 per rest_api/test_plan.md.","acceptance_criteria":"All 4 auth endpoints work. POST /auth/google returns redirect_url. Callback handles existing user, new user with key, new user without key, state mismatch. GET /auth/me returns user info (401 without session). POST /auth/logout clears session. All AUTH-EP tests pass.","notes":"Refs: spec/backend/rest_api/spec.md#authentication, spec/backend/rest_api/plan.md#routersauthpy, spec/backend/rest_api/test_plan.md#auth-endpoint-tests","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:15:12.732353-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:06:42.047436-06:00","closed_at":"2026-02-05T20:06:42.047436-06:00","close_reason":"Tests passing, implementation complete","dependencies":[{"issue_id":"chatDF-0zw","depends_on_id":"chatDF-3s1","type":"blocks","created_at":"2026-02-05T19:20:55.127018-06:00","created_by":"radhikar"},{"issue_id":"chatDF-0zw","depends_on_id":"chatDF-35j","type":"blocks","created_at":"2026-02-05T19:20:55.220857-06:00","created_by":"radhikar"}]}
{"id":"chatDF-1b1","title":"E2E: test infrastructure","description":"Set up Playwright E2E test infrastructure: playwright.config.ts (chromium, fullyParallel, webServer pointing to backend), tests/e2e/fixtures/auth.ts (login helper seeding user+session directly in SQLite or via API), tests/e2e/fixtures/data.ts (local static file server serving test parquet files), tests/e2e/fixtures/api-mocks.ts (Gemini API mock via page.route() intercepting outbound requests, returning canned streaming responses with tool calls). Small parquet test fixtures (10-100 rows). Install Playwright.","acceptance_criteria":"Playwright config works. Auth fixture creates authenticated browser context. Parquet server serves test files. Gemini mock intercepts API calls and returns streaming responses. E2E test skeleton runs.","notes":"Refs: spec/test_plan.md#e2e-test-data, spec/test_plan.md#test-execution","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:17:13.852959-06:00","created_by":"radhikar","updated_at":"2026-02-05T21:51:05.906477-06:00","closed_at":"2026-02-05T21:51:05.906477-06:00","close_reason":"E2E test infrastructure complete: playwright.config.ts, auth/data/api-mock fixtures, smoke.spec.ts (2 passing). Tests moved inside frontend project.","dependencies":[{"issue_id":"chatDF-1b1","depends_on_id":"chatDF-syj","type":"blocks","created_at":"2026-02-05T19:22:01.721692-06:00","created_by":"radhikar"},{"issue_id":"chatDF-1b1","depends_on_id":"chatDF-xfm","type":"blocks","created_at":"2026-02-05T19:22:01.806835-06:00","created_by":"radhikar"},{"issue_id":"chatDF-1b1","depends_on_id":"chatDF-urw","type":"blocks","created_at":"2026-02-05T19:22:01.886517-06:00","created_by":"radhikar"},{"issue_id":"chatDF-1b1","depends_on_id":"chatDF-fme","type":"blocks","created_at":"2026-02-05T19:22:01.968228-06:00","created_by":"radhikar"},{"issue_id":"chatDF-1b1","depends_on_id":"chatDF-bbn","type":"blocks","created_at":"2026-02-05T19:22:02.049219-06:00","created_by":"radhikar"},{"issue_id":"chatDF-1b1","depends_on_id":"chatDF-lhq","type":"blocks","created_at":"2026-02-05T19:22:02.130804-06:00","created_by":"radhikar"},{"issue_id":"chatDF-1b1","depends_on_id":"chatDF-0cy","type":"blocks","created_at":"2026-02-05T19:22:02.20871-06:00","created_by":"radhikar"}]}
{"id":"chatDF-1x1","title":"Frontend: hooks + auth + routing","description":"Implement: hooks/useAuth.ts (wraps TanStack Query for GET /auth/me with 5min stale time, provides login/logout actions), hooks/useWebSocket.ts (connects ChatDFSocket on mount when authenticated, routes events to Zustand stores: chat_token/chat_complete/chat_error -\u003e chatStore, dataset_loaded/dataset_error -\u003e datasetStore, usage_update/rate_limit_warning -\u003e uiStore + invalidate ['usage'] query), hooks/useConversation.ts (conversation loading/switching), App.tsx (React Router v7 with / and /sign-in routes), components/auth/SignIn.tsx (Google OAuth button, referral key input, error from URL params), ProtectedRoute wrapper. Write tests covering: FE-R-1 (unauthenticated redirect), FE-R-2 (authenticated renders app), FE-R-3 (sign-in page). Account tests: sign-in, sign-out flow (clear queries, reset stores, close WS, navigate).","acceptance_criteria":"useAuth provides user data and login/logout. useWebSocket routes all event types to correct stores. Routing protects / route, redirects to /sign-in. SignIn page works with referral key. Sign-out cleans up everything. All FE-R and auth tests pass.","notes":"Refs: spec/frontend/plan.md#routing, spec/frontend/plan.md#websocket-integration, spec/frontend/left_panel/account/plan.md, spec/frontend/test_plan.md#routing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:16:13.228648-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:57:29.50035-06:00","closed_at":"2026-02-05T19:57:29.50035-06:00","close_reason":"useAuth, useWebSocket, useConversation, App.tsx routing, SignIn, ProtectedRoute. 12 new tests, 131 total passing.","dependencies":[{"issue_id":"chatDF-1x1","depends_on_id":"chatDF-p9i","type":"blocks","created_at":"2026-02-05T19:21:57.251542-06:00","created_by":"radhikar"},{"issue_id":"chatDF-1x1","depends_on_id":"chatDF-78w","type":"blocks","created_at":"2026-02-05T19:21:57.330808-06:00","created_by":"radhikar"},{"issue_id":"chatDF-1x1","depends_on_id":"chatDF-b4i","type":"blocks","created_at":"2026-02-05T19:21:57.410967-06:00","created_by":"radhikar"}]}
{"id":"chatDF-2qm","title":"Backend: dataset service","description":"Implement services/dataset_service.py: validate_url (regex check), add_dataset (6-step pipeline: format check, duplicate check, limit check, HEAD+magic bytes via worker, schema extraction via worker, persist to DB), remove_dataset, refresh_schema (re-runs steps 4-5, updates existing row), get_datasets, _next_table_name (auto-naming: table1, table2...). MAX_DATASETS_PER_CONVERSATION=5. Write tests first covering: VALIDATE tests (URL format), NAME tests (auto-naming), DUP tests (duplicate detection), LIMIT tests (5 max), CACHE tests (schema refresh), REMOVE tests, AUTO tests (auto-load from chat), SOURCE tests.","acceptance_criteria":"URL validation catches bad formats. Duplicate detection works (exact string match). 5-dataset limit enforced. Auto-naming produces table1/table2/etc. Schema refresh updates row. All dataset handling tests pass.","notes":"Refs: spec/backend/dataset_handling/plan.md, spec/backend/dataset_handling/test_plan.md, spec/backend/dataset_handling/test.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:14:36.872896-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:55:31.536702-06:00","closed_at":"2026-02-05T19:55:31.536702-06:00","close_reason":"Dataset service with 6-step pipeline, 34 tests passing","dependencies":[{"issue_id":"chatDF-2qm","depends_on_id":"chatDF-jvj","type":"blocks","created_at":"2026-02-05T19:20:35.01587-06:00","created_by":"radhikar"},{"issue_id":"chatDF-2qm","depends_on_id":"chatDF-9jk","type":"blocks","created_at":"2026-02-05T19:20:35.095857-06:00","created_by":"radhikar"}]}
{"id":"chatDF-35j","title":"Backend: error handling + Pydantic models","description":"Implement services/exceptions.py (NotFoundError, ForbiddenError, RateLimitError, ConflictError) and models.py with all Pydantic request/response models. Request models: GoogleLoginRequest, SendMessageRequest, AddDatasetRequest, RenameConversationRequest, RenameDatasetRequest. Response models: UserResponse, ConversationResponse, ConversationListResponse, ConversationSummary, ConversationDetailResponse, MessageResponse, DatasetResponse, UsageResponse, MessageAckResponse, DatasetAckResponse, ClearAllResponse, DatasetDetailResponse, SuccessResponse, ErrorResponse. Write tests for model validation (required fields, constraints, serialization).","acceptance_criteria":"All exception classes defined. All Pydantic models defined with correct field types and constraints. Model validation tests pass (e.g., SendMessageRequest rejects empty content, RenameDatasetRequest validates pattern).","notes":"Refs: spec/backend/rest_api/plan.md#pydantic-models, spec/backend/rest_api/plan.md#error-response-standardization","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:14:03.710861-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:43:04.165434-06:00","closed_at":"2026-02-05T19:43:04.165434-06:00","close_reason":"Exceptions and Pydantic models implemented, 53 tests passing","dependencies":[{"issue_id":"chatDF-35j","depends_on_id":"chatDF-r87","type":"blocks","created_at":"2026-02-05T19:20:31.47515-06:00","created_by":"radhikar"},{"issue_id":"chatDF-35j","depends_on_id":"chatDF-0ad","type":"blocks","created_at":"2026-02-05T19:20:31.551791-06:00","created_by":"radhikar"}]}
{"id":"chatDF-3s1","title":"Backend: dependencies module","description":"Implement dependencies.py: get_db() FastAPI dependency yielding aiosqlite connection from app.state, get_current_user(request, db) extracting session_token from cookie and validating via auth_service (returns User model, raises 401), get_conversation(conversation_id, user, db) loading conversation by ID and validating ownership (raises 404/403). Write tests covering: DEPS tests (get_db returns connection, get_current_user with valid/invalid/expired session, get_conversation with valid/not-found/not-owner).","acceptance_criteria":"get_db yields working DB connection. get_current_user validates session cookie and returns User (401 on failure). get_conversation validates ownership (404/403). All dependency tests pass.","notes":"Refs: spec/backend/plan.md#dependency-injection, spec/backend/rest_api/plan.md#conversation-ownership-validation-pattern, spec/backend/test_plan.md#DEPS","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:15:04.742855-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:54:07.641846-06:00","closed_at":"2026-02-05T19:54:07.641846-06:00","close_reason":"Dependencies module (get_db, get_current_user, get_conversation) implemented, 8 tests passing","dependencies":[{"issue_id":"chatDF-3s1","depends_on_id":"chatDF-f8e","type":"blocks","created_at":"2026-02-05T19:20:35.74611-06:00","created_by":"radhikar"},{"issue_id":"chatDF-3s1","depends_on_id":"chatDF-jvj","type":"blocks","created_at":"2026-02-05T19:20:35.854612-06:00","created_by":"radhikar"}]}
{"id":"chatDF-44g","title":"Backend: LLM service","description":"Implement services/llm_service.py: Gemini client (google.genai.Client), build_system_prompt(datasets) assembling table schemas into prompt, stream_chat(messages, datasets, ws_send) -\u003e StreamResult with streaming loop. Tools: execute_sql (FunctionDeclaration dispatching to worker_pool.run_query), load_dataset (dispatching to dataset_service.add_dataset). Max 5 tool calls per turn, max 3 SQL retries. Token counting from response.usage_metadata. Context pruning: 50 messages max, 800K token budget. Write tests first covering: PROMPT tests (schema in prompt), TOOL tests (execute_sql, load_dataset, max 5), STREAMING tests (tokens, pause/resume on tool call, cancellation), ERR-CORRECT tests (SQL error retry), TOKEN tests (counting), CONTEXT tests (pruning, edge cases).","acceptance_criteria":"System prompt includes dataset schemas. Streaming sends chat_token events via ws_send. Tool calls dispatch to correct services. Max 5 tool calls enforced. SQL errors retried up to 3 times. Token counts extracted from usage_metadata. Context pruned to 50 messages. All LLM tests pass.","notes":"Refs: spec/backend/llm/plan.md, spec/backend/llm/test_plan.md, spec/backend/llm/test.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:14:50.720494-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:06:42.066061-06:00","closed_at":"2026-02-05T20:06:42.066061-06:00","close_reason":"Tests passing, implementation complete","dependencies":[{"issue_id":"chatDF-44g","depends_on_id":"chatDF-9jk","type":"blocks","created_at":"2026-02-05T19:20:35.333223-06:00","created_by":"radhikar"},{"issue_id":"chatDF-44g","depends_on_id":"chatDF-2qm","type":"blocks","created_at":"2026-02-05T19:20:35.413112-06:00","created_by":"radhikar"}]}
{"id":"chatDF-56j","title":"Backend: chat service (orchestration)","description":"Implement services/chat_service.py: process_message (full 14-step orchestration: concurrency check, mark active, persist user message, rate limit check, build context, fetch datasets, send query_status, call LLM stream, handle tool calls, persist assistant message, record usage, send completion, check warning, mark inactive). stop_generation (sets cancellation flag). In-memory set of active conversation IDs for concurrency guard. Error handling at each step per backend/plan.md. Write tests covering the full message flow, concurrency guard (409), stop/cancel, error handling at each step.","acceptance_criteria":"process_message runs full flow: saves user message, checks rate limit, calls LLM, handles tool calls, saves assistant message, records usage, sends completion via WebSocket. Concurrency guard prevents parallel generations (409). Stop cancels mid-stream. Error handling correct at each step. Tests pass.","notes":"Refs: spec/backend/plan.md#chat-service-orchestration, spec/backend/plan.md#full-message-send-flow","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:14:59.355804-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:14:03.312906-06:00","closed_at":"2026-02-05T20:14:03.312906-06:00","close_reason":"Tests passing, implementation complete","dependencies":[{"issue_id":"chatDF-56j","depends_on_id":"chatDF-44g","type":"blocks","created_at":"2026-02-05T19:20:35.491758-06:00","created_by":"radhikar"},{"issue_id":"chatDF-56j","depends_on_id":"chatDF-f20","type":"blocks","created_at":"2026-02-05T19:20:35.570868-06:00","created_by":"radhikar"},{"issue_id":"chatDF-56j","depends_on_id":"chatDF-9tc","type":"blocks","created_at":"2026-02-05T19:20:35.658215-06:00","created_by":"radhikar"}]}
{"id":"chatDF-6qu","title":"Backend: WebSocket endpoint","description":"Implement routers/websocket.py: WebSocket endpoint at /ws with token auth via query param (?token=...), validated via auth_service.validate_session. Close 4001 on auth failure. Ping/pong heartbeat every 30s. Route incoming messages to connection_manager. Write tests first in tests/backend/websocket/ covering: WS-CONN tests (valid/invalid/expired token, missing token), WS-HB test (heartbeat), WS-RECON tests (reconnect), WS-MSG tests (all 9 message types), WS-ERR tests (error handling, unknown message), WS-CLEAN test (cleanup on disconnect). Include integration test: full round-trip (connect -\u003e POST message -\u003e receive status -\u003e receive tokens -\u003e complete).","acceptance_criteria":"WebSocket accepts valid token, rejects invalid (close 4001). Heartbeat works. All 9 message types delivered correctly. Connection cleanup on disconnect. Full round-trip integration test passes. All WS tests pass.","notes":"Refs: spec/backend/websocket/plan.md, spec/backend/websocket/test_plan.md, spec/backend/websocket/test.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:15:33.599851-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:06:42.028496-06:00","closed_at":"2026-02-05T20:06:42.028496-06:00","close_reason":"Tests passing, implementation complete","dependencies":[{"issue_id":"chatDF-6qu","depends_on_id":"chatDF-3s1","type":"blocks","created_at":"2026-02-05T19:20:56.143483-06:00","created_by":"radhikar"},{"issue_id":"chatDF-6qu","depends_on_id":"chatDF-9tc","type":"blocks","created_at":"2026-02-05T19:20:56.222526-06:00","created_by":"radhikar"}]}
{"id":"chatDF-78w","title":"Frontend: API client + WebSocket client","description":"Implement api/client.ts (thin fetch wrapper with credentials:'include', base URL from import.meta.env.VITE_API_URL, JSON parsing, error handling) and lib/websocket.ts (ChatDFSocket class: connect with token query param, reconnect with exponential backoff 1s/2s/4s/max 30s, message parsing, event dispatch callbacks, disconnect). Write tests covering: FE-W-1 (connection with valid token), FE-W-2 (reconnect on disconnect), FE-W-3 (message parsing and event dispatch). API client tests: fetch wrapper includes credentials, handles errors.","acceptance_criteria":"API client sends requests with credentials cookie. WebSocket connects with token, reconnects on disconnect with exponential backoff, parses incoming messages and dispatches events. All FE-W tests pass.","notes":"Refs: spec/frontend/plan.md#shared-api-client, spec/frontend/plan.md#websocket-integration, spec/frontend/test_plan.md#websocket","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:15:55.118849-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:52:08.074931-06:00","closed_at":"2026-02-05T19:52:08.074931-06:00","close_reason":"API client + ChatDFSocket implemented, 31 tests passing","dependencies":[{"issue_id":"chatDF-78w","depends_on_id":"chatDF-x59","type":"blocks","created_at":"2026-02-05T19:21:56.903194-06:00","created_by":"radhikar"},{"issue_id":"chatDF-78w","depends_on_id":"chatDF-azr","type":"blocks","created_at":"2026-02-05T19:21:56.98425-06:00","created_by":"radhikar"}]}
{"id":"chatDF-9c4","title":"Backend: conversations router","description":"Implement routers/conversations.py: POST /conversations (create), GET /conversations (list sorted by updated_at desc with dataset_count), GET /conversations/{id} (detail with messages + datasets), PATCH /conversations/{id} (rename), DELETE /conversations/{id} (single delete with cascade), DELETE /conversations (clear all), POST /conversations/{id}/messages (send message triggering chat_service), POST /conversations/{id}/stop (stop generation). Write tests first in tests/backend/rest_api/test_conversation_endpoints.py and test_chat_endpoints.py covering CONV-EP-1 through CONV-EP-11 and CHAT-EP-1 through CHAT-EP-6.","acceptance_criteria":"All conversation + chat endpoints work correctly. Create returns 201. List returns sorted conversations. Detail includes messages/datasets. Rename updates title. Delete cascades. Clear all deletes only user's conversations. Send message returns 200 with message_id. Stop returns 200. Ownership enforced (403). All CONV-EP and CHAT-EP tests pass.","notes":"Refs: spec/backend/rest_api/spec.md#conversations, spec/backend/rest_api/plan.md#routersconversationspy, spec/backend/rest_api/test_plan.md#conversation-endpoint-tests","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:15:18.472215-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:22:27.841167-06:00","closed_at":"2026-02-05T20:22:27.841167-06:00","close_reason":"Implemented conversations router with all 8 endpoints (POST create, GET list, GET detail, PATCH rename, DELETE single, DELETE all, POST message, POST stop). Tests: 12 conversation endpoint tests (CONV-EP-1 through CONV-EP-11 + unauthenticated test) and 8 chat endpoint tests (CHAT-EP-1 through CHAT-EP-6 + no-op stop + unauthenticated test) all passing. Router registered in main.py. Zero regressions (396/400 pass, 4 pre-existing failures in test_config.py).","dependencies":[{"issue_id":"chatDF-9c4","depends_on_id":"chatDF-3s1","type":"blocks","created_at":"2026-02-05T19:20:55.311548-06:00","created_by":"radhikar"},{"issue_id":"chatDF-9c4","depends_on_id":"chatDF-35j","type":"blocks","created_at":"2026-02-05T19:20:55.405874-06:00","created_by":"radhikar"},{"issue_id":"chatDF-9c4","depends_on_id":"chatDF-56j","type":"blocks","created_at":"2026-02-05T19:20:55.496981-06:00","created_by":"radhikar"}]}
{"id":"chatDF-9jk","title":"Backend: worker pool + data worker","description":"Implement services/worker_pool.py (async wrappers: validate_url, get_schema, run_query, pool lifecycle start/shutdown) and workers/data_worker.py (pure functions: fetch_and_validate, extract_schema, execute_query using Polars). Pool: 4 workers default, 60s query timeout, 1000-row result limit, worker recycling (maxtasksperchild=50). Write tests first covering: POOL tests (startup, shutdown), FETCH tests (valid parquet, invalid file, network errors), SCHEMA test, SQL tests (single table, cross-table, LIMIT 1000, errors), TIMEOUT tests, MEMORY tests, ERROR tests, CRASH tests, QUEUE test. Requires test parquet fixtures (simple.parquet, empty.parquet, wide.parquet, large.parquet, not_parquet.csv).","acceptance_criteria":"Worker pool starts/stops cleanly. fetch_and_validate distinguishes parquet from non-parquet. extract_schema returns columns + row_count. execute_query runs SQL via Polars, respects 1000-row limit. Timeouts and errors handled gracefully. All worker tests pass.","notes":"Refs: spec/backend/worker/plan.md, spec/backend/worker/test_plan.md, spec/backend/worker/test.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:14:20.593566-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:51:03.852063-06:00","closed_at":"2026-02-05T19:51:03.852063-06:00","close_reason":"Worker pool + data worker implemented, 30 tests passing","dependencies":[{"issue_id":"chatDF-9jk","depends_on_id":"chatDF-r87","type":"blocks","created_at":"2026-02-05T19:20:34.768052-06:00","created_by":"radhikar"},{"issue_id":"chatDF-9jk","depends_on_id":"chatDF-0ad","type":"blocks","created_at":"2026-02-05T19:20:34.855474-06:00","created_by":"radhikar"}]}
{"id":"chatDF-9tc","title":"Backend: WebSocket connection manager + messages","description":"Implement services/connection_manager.py (ConnectionManager class: connect, disconnect, send_to_user, send_to_websocket; in-memory dict of user_id -\u003e list[WebSocket]) and services/ws_messages.py (message factory functions: chat_token, chat_complete, chat_error, dataset_loading, dataset_loaded, dataset_error, query_status, rate_limit_warning, rate_limit_exceeded). Each factory returns a dict with 'type' field + data fields, serialized to JSON. Write tests for: connection tracking, send_to_user routing, disconnect cleanup, all message factory output shapes.","acceptance_criteria":"ConnectionManager tracks connections per user_id. send_to_user delivers to all connections for a user. Disconnect removes connection. All 9 message factories produce correct JSON shapes. Tests pass.","notes":"Refs: spec/backend/websocket/plan.md, spec/backend/websocket/test_plan.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:14:42.81558-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:43:38.178565-06:00","closed_at":"2026-02-05T19:43:38.178565-06:00","close_reason":"ConnectionManager + 9 message factories implemented, 53 tests passing","dependencies":[{"issue_id":"chatDF-9tc","depends_on_id":"chatDF-r87","type":"blocks","created_at":"2026-02-05T19:20:35.176172-06:00","created_by":"radhikar"},{"issue_id":"chatDF-9tc","depends_on_id":"chatDF-0ad","type":"blocks","created_at":"2026-02-05T19:20:35.256267-06:00","created_by":"radhikar"}]}
{"id":"chatDF-azr","title":"Frontend test infrastructure","description":"Set up Vitest test infrastructure: vitest.config.ts (jsdom environment), tests/frontend/setup.ts (MSW server start/stop), tests/frontend/helpers/render.tsx (custom render with QueryClientProvider + MemoryRouter), tests/frontend/helpers/mocks/handlers.ts (default MSW REST handlers for all endpoints), tests/frontend/helpers/mocks/websocket.ts (WebSocket mock), tests/frontend/helpers/mocks/data.ts (factory functions: createUser, createConversation, createMessage, createDataset, createUsageStats), tests/frontend/helpers/stores.ts (store preset helpers). Install vitest, @testing-library/react, @testing-library/user-event, msw, jsdom.","acceptance_criteria":"vitest runs and discovers test files. Custom render helper wraps with providers. MSW handlers intercept fetch calls. Factory functions produce valid response shapes.","notes":"Refs: spec/test_plan.md#frontend-test-data, spec/frontend/test_plan.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:13:44.565306-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:47:43.724647-06:00","closed_at":"2026-02-05T19:47:43.724647-06:00","close_reason":"Frontend test infra with Vitest, MSW, custom render, factories. 20 smoke tests passing.","dependencies":[{"issue_id":"chatDF-azr","depends_on_id":"chatDF-x59","type":"blocks","created_at":"2026-02-05T19:20:31.055622-06:00","created_by":"radhikar"}]}
{"id":"chatDF-b4i","title":"Frontend: theme system","description":"Implement theme system: hooks/useTheme.ts (three-way state: light/dark/system, reads localStorage, listens to matchMedia for system preference, applies 'dark' class to html element), styles/globals.css (CSS custom properties for semantic tokens: --color-bg, --color-surface, --color-text, --color-accent, --color-error, --color-warning mapped per light/dark), tailwind.config.ts (darkMode: 'class', extend colors to reference CSS vars). Write tests first covering: FE-T-1 (default from system preference), FE-T-2 (toggle cycles light/dark/system), FE-T-3 (persists to localStorage), FE-T-4 (system preference change updates theme).","acceptance_criteria":"Theme toggles between light/dark/system. System preference respected as default. Persisted to localStorage. CSS variables change per theme. All FE-T tests pass.","notes":"Refs: spec/frontend/theme/plan.md, spec/frontend/test_plan.md#theme","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:15:49.149499-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:50:49.138318-06:00","closed_at":"2026-02-05T19:50:49.138318-06:00","close_reason":"Theme hook, CSS vars, tailwind config. 10 tests passing.","dependencies":[{"issue_id":"chatDF-b4i","depends_on_id":"chatDF-x59","type":"blocks","created_at":"2026-02-05T19:21:56.731414-06:00","created_by":"radhikar"},{"issue_id":"chatDF-b4i","depends_on_id":"chatDF-azr","type":"blocks","created_at":"2026-02-05T19:21:56.821593-06:00","created_by":"radhikar"}]}
{"id":"chatDF-bbn","title":"Frontend: SQL panel + data grid","description":"Implement SQLPanel.tsx: CodeMirror 6 read-only SQL display with syntax highlighting, slide animation (translateY) on open/close, copy button (clipboard API), close via X/Escape/parent toggle, theme sync with app theme. Implement DataGrid.tsx: TanStack Table with sortable columns (single-column sort: asc/desc/none), resizable columns (double-click auto-fit), sticky header, pagination (50 rows/page), copy table as TSV, null cell display, numeric right-alignment, empty results state. Write tests covering SP-* and DG-* scenarios from chat_area/test_plan.md.","acceptance_criteria":"SQL panel shows syntax-highlighted SQL, copies to clipboard, closes properly. DataGrid sorts, resizes, paginates at 50 rows, copies as TSV. All SP and DG tests pass.","notes":"Refs: spec/frontend/chat_area/sql_panel/plan.md, spec/frontend/chat_area/data_grid/plan.md, spec/frontend/chat_area/test_plan.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:16:51.98311-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:14:37.336306-06:00","closed_at":"2026-02-05T20:14:37.336306-06:00","close_reason":"Implemented SQLPanel and DataGrid components with full test coverage. Tests: 11 SQL panel tests (SP-DISPLAY-1, SP-COPY-1, SP-CLOSE-1, SP-CLOSE-2, SP-THEME-1) and 20 DataGrid tests (DG-SORT-1/2/3, DG-PAGE-1, DG-NULL-1, DG-EMPTY-1, DG-COPY-1). All 31 tests pass.","dependencies":[{"issue_id":"chatDF-bbn","depends_on_id":"chatDF-yi5","type":"blocks","created_at":"2026-02-05T19:21:57.806231-06:00","created_by":"radhikar"}]}
{"id":"chatDF-c0h","title":"E2E: core user flows","description":"Implement E2E tests for core user flows: auth.spec.ts (CUF-1: sign-up with referral key, CUF-2: sign-in existing user, CUF-6: logout), dataset-loading.spec.ts (CUF-3: load dataset by URL, verify card shows dimensions), chat-flow.spec.ts (CUF-4: send question and receive answer with SQL, CUF-5: follow-up question in same conversation), conversation-management.spec.ts (P1-2: switch conversations, P1-9: rename/delete conversations).","acceptance_criteria":"All core user flow E2E tests pass: sign-up, sign-in, logout, dataset loading, chat Q\u0026A with SQL, follow-up questions, conversation management.","notes":"Refs: spec/test.md (CUF-1 through CUF-6, P1-2, P1-9)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:17:18.749692-06:00","created_by":"radhikar","updated_at":"2026-02-05T21:56:22.034118-06:00","closed_at":"2026-02-05T21:56:22.034118-06:00","close_reason":"Completed: wrote 33 E2E Playwright tests across 4 test files covering auth flows (CUF-1/2/6), dataset loading (CUF-3), chat flow (CUF-4/5), and conversation management (P1-2/P1-9). All tests discovered by Playwright (verified via --list). Files: auth.spec.ts (10 tests), dataset-loading.spec.ts (7 tests), chat-flow.spec.ts (7 tests), conversation-management.spec.ts (9 tests).","dependencies":[{"issue_id":"chatDF-c0h","depends_on_id":"chatDF-1b1","type":"blocks","created_at":"2026-02-05T19:22:02.285547-06:00","created_by":"radhikar"}]}
{"id":"chatDF-d6b","title":"Backend: usage router","description":"Implement routers/usage.py: GET /usage returning tokens_used, token_limit, remaining, resets_in_seconds, usage_percent. Uses rate_limit_service.check_limit(). Write tests first in tests/backend/rest_api/test_usage_endpoints.py covering USAGE-EP-1 (authenticated, returns usage stats) and USAGE-EP-2 (unauthenticated, returns 401).","acceptance_criteria":"GET /usage returns correct usage stats for authenticated user. Returns 401 without session. All USAGE-EP tests pass.","notes":"Refs: spec/backend/rest_api/spec.md#usage, spec/backend/rest_api/plan.md#routersusagepy, spec/backend/rest_api/test_plan.md#usage-endpoint-tests","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:15:24.992036-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:06:42.009754-06:00","closed_at":"2026-02-05T20:06:42.009754-06:00","close_reason":"Tests passing, implementation complete","dependencies":[{"issue_id":"chatDF-d6b","depends_on_id":"chatDF-3s1","type":"blocks","created_at":"2026-02-05T19:20:55.871046-06:00","created_by":"radhikar"},{"issue_id":"chatDF-d6b","depends_on_id":"chatDF-35j","type":"blocks","created_at":"2026-02-05T19:20:55.962692-06:00","created_by":"radhikar"},{"issue_id":"chatDF-d6b","depends_on_id":"chatDF-f20","type":"blocks","created_at":"2026-02-05T19:20:56.054791-06:00","created_by":"radhikar"}]}
{"id":"chatDF-f20","title":"Backend: rate limit service","description":"Implement services/rate_limit_service.py: check_limit(db, user_id) returns RateLimitStatus (allowed, usage_tokens, limit_tokens, usage_percent, remaining_tokens, resets_in_seconds, warning), record_usage(db, user_id, input_tokens, output_tokens). Rolling 24-hour window via SQL. 5M token limit. Warning at 80%. Write tests first covering: WINDOW tests (24h boundary), UNDER-LIMIT tests, WARNING tests (80% threshold), EXCEEDED tests (at/over limit), ALLOWED tests (only chat rate-limited), RESET tests (resets_in_seconds calculation), CLOCK tests (server time, shared budget). Use freezegun for time control.","acceptance_criteria":"check_limit correctly sums tokens in 24h window. Warning triggers at 80%. Returns not-allowed at 5M+. record_usage inserts rows. resets_in_seconds calculated correctly. All rate limiting tests pass.","notes":"Refs: spec/backend/rate_limiting/plan.md, spec/backend/rate_limiting/test_plan.md, spec/backend/rate_limiting/test.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:14:27.577211-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:53:04.129924-06:00","closed_at":"2026-02-05T19:53:04.129924-06:00","close_reason":"Rate limit service with 24h window, warning at 80%, 24 tests passing. Full backend suite: 246 passing.","dependencies":[{"issue_id":"chatDF-f20","depends_on_id":"chatDF-jvj","type":"blocks","created_at":"2026-02-05T19:20:34.935305-06:00","created_by":"radhikar"}]}
{"id":"chatDF-f8e","title":"Backend: auth service","description":"Implement services/auth_service.py: Google OAuth via Authlib (google_login, google_callback), session management (create_session returns UUID token, validate_session, delete_session), referral key validation (validate_referral_key, mark_key_used), get_current_user FastAPI dependency. Sessions: 7-day expiry with refresh on each request. httpOnly secure cookies with SameSite=Lax. WebSocket auth via query param. Write tests first covering: OAUTH tests (sign-up with referral key, existing user, invalid key, state mismatch), REFERRAL tests, SESSION tests (cookie properties, expiry, refresh, multiple sessions), LOGOUT tests, SECURITY tests (401 without session).","acceptance_criteria":"OAuth flow works with mocked Authlib. Sessions created/validated/deleted correctly. Referral keys validated and marked used. Cookie properties correct (httpOnly, secure, SameSite=Lax). All auth tests pass.","notes":"Refs: spec/backend/auth/plan.md, spec/backend/auth/test_plan.md, spec/backend/auth/test.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:14:12.490907-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:51:37.971375-06:00","closed_at":"2026-02-05T19:51:37.971375-06:00","close_reason":"Auth service with OAuth, sessions, referral keys. 32 tests passing.","dependencies":[{"issue_id":"chatDF-f8e","depends_on_id":"chatDF-jvj","type":"blocks","created_at":"2026-02-05T19:20:34.675877-06:00","created_by":"radhikar"}]}
{"id":"chatDF-fme","title":"Frontend: message list + loading states","description":"Implement MessageList.tsx + MessageBubble.tsx: user messages right-aligned, assistant messages left-aligned with react-markdown rendering, inline DataGrid for table data, 'Show SQL' button opening SQL panel, error display with expandable details, streaming indicator, auto-scroll to bottom (pauses on scroll-up), copy button on hover, timestamp on hover. Also implement LoadingStates.tsx: phase indicators (thinking=animated dots, executing/formatting=spinner), timeout warnings (30s 'Taking longer...', 60s error state), forward-only phase transitions. Write tests covering ML-* and LS-* scenarios from chat_area/test_plan.md.","acceptance_criteria":"Messages render correctly by role. Markdown rendered in assistant messages. DataGrid inline for table data. Auto-scroll works, pauses on scroll-up. Loading phases display correctly with timeouts. All ML and LS tests pass.","notes":"Refs: spec/frontend/chat_area/message_list/plan.md, spec/frontend/chat_area/loading_states/plan.md, spec/frontend/chat_area/test_plan.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:16:43.882268-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:14:03.33181-06:00","closed_at":"2026-02-05T20:14:03.33181-06:00","close_reason":"Tests passing, implementation complete","dependencies":[{"issue_id":"chatDF-fme","depends_on_id":"chatDF-yi5","type":"blocks","created_at":"2026-02-05T19:21:57.729922-06:00","created_by":"radhikar"}]}
{"id":"chatDF-ifi","title":"Backend: config module","description":"Implement config.py with Pydantic Settings class. Fields: gemini_api_key (required), google_client_id (required), google_client_secret (required), database_url (default sqlite:///chatdf.db), cors_origins (default http://localhost:5173), token_limit (default 5000000), worker_memory_limit (default 512), worker_pool_size (default 4), session_duration_days (default 7). Loaded from .env via python-dotenv. Singleton via functools.lru_cache. Write tests for: defaults, env var override, required field validation.","acceptance_criteria":"Settings loads from .env. Defaults are correct. Missing required fields raise validation error. Singleton pattern works. Tests pass.","notes":"Refs: spec/backend/plan.md#configuration, spec/backend/test_plan.md#CONFIG","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:13:57.992516-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:41:56.260291-06:00","closed_at":"2026-02-05T19:41:56.260291-06:00","close_reason":"Config module implemented, 19 tests passing","dependencies":[{"issue_id":"chatDF-ifi","depends_on_id":"chatDF-r87","type":"blocks","created_at":"2026-02-05T19:20:31.31848-06:00","created_by":"radhikar"},{"issue_id":"chatDF-ifi","depends_on_id":"chatDF-0ad","type":"blocks","created_at":"2026-02-05T19:20:31.396922-06:00","created_by":"radhikar"}]}
{"id":"chatDF-jvj","title":"Backend: database module","description":"Implement database.py with init_db() and get_db(). Schema creates 7 tables (users, sessions, referral_keys, conversations, messages, datasets, token_usage) with proper columns, types, foreign keys (CASCADE deletes), and 7 indexes. WAL mode + foreign key enforcement. Write tests first in tests/backend/database/ covering: SCHEMA tests (tables exist, columns match), INDEX tests, FOREIGN KEY tests, CASCADE tests (delete user cascades, delete conversation cascades), CONSTRAINT tests (WAL mode, UUID format, ISO timestamps, CHECK constraints on role/status).","acceptance_criteria":"All 7 tables created correctly. Foreign keys enforced. CASCADE deletes work (user deletion removes sessions/conversations/messages/datasets). WAL mode enabled. All database tests pass.","notes":"Refs: spec/backend/database/plan.md, spec/backend/database/test_plan.md, spec/backend/database/test.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:13:53.479258-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:45:47.134842-06:00","closed_at":"2026-02-05T19:45:47.134842-06:00","close_reason":"Database module with 7 tables, 7 indexes, WAL mode. 35 tests passing.","dependencies":[{"issue_id":"chatDF-jvj","depends_on_id":"chatDF-r87","type":"blocks","created_at":"2026-02-05T19:20:31.149007-06:00","created_by":"radhikar"},{"issue_id":"chatDF-jvj","depends_on_id":"chatDF-0ad","type":"blocks","created_at":"2026-02-05T19:20:31.233328-06:00","created_by":"radhikar"}]}
{"id":"chatDF-lhq","title":"Frontend: onboarding guide","description":"Implement OnboardingGuide.tsx: shown when no datasets and no messages, 'Try with sample data' button (adds Iris dataset from Hugging Face URL), step-by-step guide text, example prompt chips (appear after sample data loads), centered whitespace-heavy layout. Props: onSendPrompt(text). Write tests covering OB-* scenarios from chat_area/test_plan.md: OB-1 (renders when empty), OB-2 (sample data button triggers addDataset), OB-3 (prompt chips appear after data loads), OB-4 (hidden when messages exist).","acceptance_criteria":"Onboarding shows when no datasets/messages. Sample data button works. Prompt chips appear after data loads. Hidden when messages exist. All OB tests pass.","notes":"Refs: spec/frontend/chat_area/onboarding/plan.md, spec/frontend/chat_area/test_plan.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:16:56.847586-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:11:27.854361-06:00","closed_at":"2026-02-05T20:11:27.854361-06:00","close_reason":"Implemented OnboardingGuide and SuggestedPrompts components with 14 passing tests (OB-1 through OB-6). Created constants.ts, OnboardingGuide.tsx, SuggestedPrompts.tsx, and onboarding.test.tsx. All existing tests remain passing.","dependencies":[{"issue_id":"chatDF-lhq","depends_on_id":"chatDF-yi5","type":"blocks","created_at":"2026-02-05T19:21:57.882757-06:00","created_by":"radhikar"}]}
{"id":"chatDF-nbf","title":"Backend: datasets router","description":"Implement routers/datasets.py: POST /conversations/{id}/datasets (add dataset), PATCH /conversations/{id}/datasets/{id} (rename table name), POST /conversations/{id}/datasets/{id}/refresh (refresh schema), DELETE /conversations/{id}/datasets/{id} (remove). Write tests first in tests/backend/rest_api/test_dataset_endpoints.py covering DS-EP-1 through DS-EP-10.","acceptance_criteria":"Add dataset returns 201. Invalid URL returns 400. Duplicate URL returns 400. At-limit returns 400. Rename updates tableName. Refresh re-fetches schema. Delete removes dataset. Ownership enforced. All DS-EP tests pass.","notes":"Refs: spec/backend/rest_api/spec.md#datasets, spec/backend/rest_api/plan.md#routersdatasetspy, spec/backend/rest_api/test_plan.md#dataset-endpoint-tests","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:15:21.774841-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:06:42.085027-06:00","closed_at":"2026-02-05T20:06:42.085027-06:00","close_reason":"Tests passing, implementation complete","dependencies":[{"issue_id":"chatDF-nbf","depends_on_id":"chatDF-3s1","type":"blocks","created_at":"2026-02-05T19:20:55.593333-06:00","created_by":"radhikar"},{"issue_id":"chatDF-nbf","depends_on_id":"chatDF-35j","type":"blocks","created_at":"2026-02-05T19:20:55.686918-06:00","created_by":"radhikar"},{"issue_id":"chatDF-nbf","depends_on_id":"chatDF-2qm","type":"blocks","created_at":"2026-02-05T19:20:55.779475-06:00","created_by":"radhikar"}]}
{"id":"chatDF-p9i","title":"Frontend: Zustand stores","description":"Implement three Zustand stores: stores/chatStore.ts (activeConversationId, messages[], streamingTokens, isStreaming, streamingMessageId, loadingPhase, dailyLimitReached; actions: setActiveConversation, addMessage, appendStreamToken, setStreaming, reset), stores/datasetStore.ts (datasets[] for active conversation, loading states; actions: addDataset, removeDataset, updateDataset, renameDataset, refreshSchema, reset), stores/uiStore.ts (leftPanelOpen, sqlPanelOpen, activeSqlContent, schemaModalDatasetId; actions: toggleLeftPanel, openSqlPanel, closeSqlPanel, openSchemaModal, closeSchemaModal). Stores reset when activeConversationId changes. Write tests covering FE-S-1 through FE-S-4 per frontend/test_plan.md.","acceptance_criteria":"All three stores work correctly. chatStore handles message streaming. datasetStore tracks datasets per conversation. uiStore manages panel visibility. Stores reset on conversation change. All FE-S tests pass.","notes":"Refs: spec/frontend/plan.md#state-management-architecture, spec/frontend/test_plan.md#state-management","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:16:01.454941-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:52:15.262462-06:00","closed_at":"2026-02-05T19:52:15.262462-06:00","close_reason":"3 Zustand stores (chat, dataset, ui) implemented, 58 tests passing","dependencies":[{"issue_id":"chatDF-p9i","depends_on_id":"chatDF-x59","type":"blocks","created_at":"2026-02-05T19:21:57.090704-06:00","created_by":"radhikar"},{"issue_id":"chatDF-p9i","depends_on_id":"chatDF-azr","type":"blocks","created_at":"2026-02-05T19:21:57.171528-06:00","created_by":"radhikar"}]}
{"id":"chatDF-r87","title":"Backend project setup","description":"Create backend project scaffolding: pyproject.toml with all dependencies (FastAPI, uvicorn, aiosqlite, polars, google-genai, authlib, pydantic-settings, python-dotenv), folder structure (app/, app/routers/, app/services/, app/workers/), .env.example, __init__.py files. Use uv for package management.","acceptance_criteria":"pyproject.toml exists with all deps listed. uv lock succeeds. Folder structure matches spec/plan.md project structure. .env.example has all config vars from backend/plan.md.","notes":"Refs: spec/plan.md#project-structure, spec/backend/plan.md#configuration","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:13:28.083261-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:34:00.001556-06:00","closed_at":"2026-02-05T19:34:00.001556-06:00","close_reason":"All scaffolding created, uv lock succeeded, folder structure matches plan"}
{"id":"chatDF-s8f","title":"E2E: edge cases + cross-cutting","description":"Implement E2E tests for edge cases and cross-cutting concerns: rate-limiting.spec.ts (CUF-7: rate limit warning and exceeded states), error-recovery.spec.ts (P1-3: invalid URL error, P1-4: SQL error with retry, P1-6: network disconnection recovery), cross-cutting.spec.ts (CC-1: theme persistence, CC-2: responsive layout, CC-3: WebSocket reconnection, CC-4: concurrent tab handling, CC-5: session expiry, CC-6: keyboard navigation).","acceptance_criteria":"All edge case and cross-cutting E2E tests pass: rate limiting UI, error recovery flows, theme persistence, responsive layout, WebSocket reconnection, keyboard navigation.","notes":"Refs: spec/test.md (CUF-7, P1-3, P1-4, P1-6, CC-1 through CC-6)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:17:22.68961-06:00","created_by":"radhikar","updated_at":"2026-02-05T21:57:07.149279-06:00","closed_at":"2026-02-05T21:57:07.149279-06:00","close_reason":"Completed: wrote 27 E2E Playwright tests across 3 files covering rate limiting (CUF-7, 5 tests), error recovery (P1-3/4/6, 7 tests), and cross-cutting (CC-1-6, 15 tests). All 62 total E2E tests discovered by Playwright.","dependencies":[{"issue_id":"chatDF-s8f","depends_on_id":"chatDF-1b1","type":"blocks","created_at":"2026-02-05T19:22:02.36571-06:00","created_by":"radhikar"}]}
{"id":"chatDF-syj","title":"Backend: main app + middleware + cross-cutting tests","description":"Implement main.py: FastAPI app with async lifespan (init DB, start worker pool on startup; drain pool, close DB on shutdown), mount all routers with prefixes (/auth, /conversations, /conversations/{id}/datasets, /usage, /ws), register CORSMiddleware (PATCH added to allowed methods), RequestLoggingMiddleware, ErrorHandlingMiddleware, exception handlers for domain exceptions. Write tests covering: APP-LIFECYCLE tests (startup/shutdown), MIDDLEWARE tests (CORS headers, logging, error handling), cross-cutting tests CROSS-1 (error format), CROSS-2 (status codes), CROSS-3 (CORS headers including PATCH method, preflight, disallowed origin).","acceptance_criteria":"App starts and shuts down cleanly. All routers mounted at correct prefixes. CORS allows GET/POST/PATCH/DELETE/OPTIONS. Error responses follow standard format. Logging middleware captures requests. All APP-LIFECYCLE, MIDDLEWARE, and CROSS tests pass.","notes":"Refs: spec/backend/plan.md#fastapi-application-structure, spec/backend/rest_api/test_plan.md#cross-cutting-tests, spec/backend/test_plan.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:15:40.691044-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:28:54.189103-06:00","closed_at":"2026-02-05T20:28:54.189103-06:00","close_reason":"Implemented main.py updates and cross-cutting tests. Added worker pool start/shutdown in lifespan, RequestLoggingMiddleware, ErrorHandlingMiddleware. Wrote 36 tests covering APP-LIFECYCLE (startup, shutdown, DB init), MIDDLEWARE (CORS, logging, error handling), CROSS-1 (error format), CROSS-2 (status codes), CROSS-3 (CORS including PATCH), and router mounting. All 36 tests pass. Zero regressions in the existing 432 backend tests.","dependencies":[{"issue_id":"chatDF-syj","depends_on_id":"chatDF-0zw","type":"blocks","created_at":"2026-02-05T19:20:56.299887-06:00","created_by":"radhikar"},{"issue_id":"chatDF-syj","depends_on_id":"chatDF-9c4","type":"blocks","created_at":"2026-02-05T19:20:56.379493-06:00","created_by":"radhikar"},{"issue_id":"chatDF-syj","depends_on_id":"chatDF-nbf","type":"blocks","created_at":"2026-02-05T19:20:56.456912-06:00","created_by":"radhikar"},{"issue_id":"chatDF-syj","depends_on_id":"chatDF-d6b","type":"blocks","created_at":"2026-02-05T19:20:56.534418-06:00","created_by":"radhikar"},{"issue_id":"chatDF-syj","depends_on_id":"chatDF-6qu","type":"blocks","created_at":"2026-02-05T19:20:56.614123-06:00","created_by":"radhikar"},{"issue_id":"chatDF-syj","depends_on_id":"chatDF-ifi","type":"blocks","created_at":"2026-02-05T19:20:56.691085-06:00","created_by":"radhikar"}]}
{"id":"chatDF-urw","title":"Frontend: chat input","description":"Implement ChatInput.tsx: auto-resizing textarea (1-5 lines then scroll), Enter to send / Shift+Enter for newline, 2000 char hard limit with counter at 1800+, send button (changes to stop button when streaming), disabled when streaming or rate limit reached. Props: onSend(text), onStop(). Write tests covering CI-SEND-1 (send on Enter), CI-SEND-2 (no empty send), CI-SEND-3 (Shift+Enter newline), CI-CHAR-1 (character limit), CI-STOP-1 (stop button during streaming), CI-DISABLE-1 (disabled at rate limit) from chat_area/test_plan.md.","acceptance_criteria":"Textarea auto-resizes. Enter sends, Shift+Enter adds newline. Character limit enforced at 2000 with counter. Send/stop button toggles. Disabled when streaming or rate-limited. All CI tests pass.","notes":"Refs: spec/frontend/chat_area/chat_input/plan.md, spec/frontend/chat_area/test_plan.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:16:36.485789-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:10:45.134667-06:00","closed_at":"2026-02-05T20:10:45.134667-06:00","close_reason":"Implemented ChatInput.tsx with auto-resizing textarea, Enter-to-send / Shift+Enter-for-newline, 2000-char hard limit with counter at 1800+, send/stop button toggle, disabled state when rate-limited. All 22 tests pass (CI-SEND-1/2/3, CI-CHAR-1/2, CI-STOP-1, CI-DISABLE-1 plus additional edge cases).","dependencies":[{"issue_id":"chatDF-urw","depends_on_id":"chatDF-yi5","type":"blocks","created_at":"2026-02-05T19:21:57.650318-06:00","created_by":"radhikar"}]}
{"id":"chatDF-x59","title":"Frontend project setup","description":"Create frontend project scaffolding: package.json with all dependencies (react, react-dom, react-router, zustand, @tanstack/react-query, @tanstack/react-table, tailwindcss, @codemirror/lang-sql, react-markdown), vite.config.ts with proxy to backend, tsconfig.json, tailwind.config.ts with darkMode class strategy, index.html, src/main.tsx entry point, folder structure (src/components/, src/hooks/, src/stores/, src/api/, src/lib/, src/styles/). Use bun.","acceptance_criteria":"package.json exists with all deps. bun install succeeds. vite dev server starts. Folder structure matches spec/plan.md.","notes":"Refs: spec/plan.md#project-structure, spec/frontend/plan.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T19:13:31.885198-06:00","created_by":"radhikar","updated_at":"2026-02-05T19:35:02.805503-06:00","closed_at":"2026-02-05T19:35:02.805503-06:00","close_reason":"All scaffolding created, bun install succeeded, vite dev server starts"}
{"id":"chatDF-xfm","title":"Frontend: left panel components","description":"Implement left panel child components: ChatHistory.tsx (TanStack Query for GET /conversations, conversation list sorted by updated_at, click to select, inline rename via double-click, inline delete with confirmation, active highlighting, empty state), Settings.tsx (theme toggle 3-way via useTheme, Clear All Conversations button + confirmation modal using DELETE /conversations, About/Help modals), UsageStats.tsx (progress bar with color states normal/warning/limit, TanStack Query for GET /usage with 60s stale time, WebSocket real-time updates, expandable view, number formatting), Account.tsx (avatar+name+email display, sign-out button with full cleanup). Write tests covering CH-*, ST-*, US-*, AC-* scenarios from left_panel/test_plan.md.","acceptance_criteria":"ChatHistory lists conversations, supports rename/delete/select. Settings toggles theme, clears all conversations with confirmation. UsageStats shows progress bar with correct colors, updates via WebSocket. Account displays user info, sign-out works. All left panel tests pass.","notes":"Refs: spec/frontend/left_panel/chat_history/plan.md, spec/frontend/left_panel/settings/plan.md, spec/frontend/left_panel/usage_stats/plan.md, spec/frontend/left_panel/account/plan.md, spec/frontend/left_panel/test_plan.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:16:30.768423-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:16:44.512829-06:00","closed_at":"2026-02-05T20:16:44.512829-06:00","close_reason":"Tests passing, implementation complete - 39 new tests for ChatHistory, Settings, UsageStats, Account","dependencies":[{"issue_id":"chatDF-xfm","depends_on_id":"chatDF-yi5","type":"blocks","created_at":"2026-02-05T19:21:57.571801-06:00","created_by":"radhikar"}]}
{"id":"chatDF-yi5","title":"Frontend: app shell + layout","description":"Implement AppShell.tsx (CSS Grid three-panel layout: left 260px/0px, center 1fr, right 300px with transition), Header.tsx (hamburger toggle for left panel, app title), LeftPanel.tsx container (renders ChatHistory, Settings, UsageStats, Account sections; controlled by uiStore.leftPanelOpen), RightPanel.tsx container (renders DatasetInput + DatasetCard list; 280px fixed width), ChatArea.tsx container (conditional rendering: OnboardingGuide when no datasets+messages, SuggestedPrompts when datasets+no messages, MessageList+ChatInput otherwise; SQLPanel overlay). Responsive: below 1024px left panel is overlay with backdrop. Write tests covering: FE-L-1 (three panels render), FE-L-2 (left panel collapse/expand), FE-L-3 (responsive overlay below 1024px).","acceptance_criteria":"Three-panel grid renders correctly. Left panel collapses/expands with animation. Right panel fixed at 280px. ChatArea conditionally renders correct state. Responsive overlay works below 1024px. All FE-L tests pass.","notes":"Refs: spec/frontend/plan.md#layout-implementation, spec/frontend/chat_area/plan.md, spec/frontend/left_panel/plan.md, spec/frontend/right_panel/plan.md, spec/frontend/test_plan.md#layout","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T19:16:21.335696-06:00","created_by":"radhikar","updated_at":"2026-02-05T20:06:42.108096-06:00","closed_at":"2026-02-05T20:06:42.108096-06:00","close_reason":"Tests passing, implementation complete","dependencies":[{"issue_id":"chatDF-yi5","depends_on_id":"chatDF-1x1","type":"blocks","created_at":"2026-02-05T19:21:57.493313-06:00","created_by":"radhikar"}]}
