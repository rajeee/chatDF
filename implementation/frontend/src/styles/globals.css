@tailwind base;
@tailwind components;
@tailwind utilities;

/* Implements: spec/frontend/plan.md#theme-implementation
   Semantic color tokens mapped per light/dark theme. */

@layer base {
  :root {
    --color-bg: #f9fafb;
    --color-surface: #ffffff;
    --color-text: #111827;
    --color-text-secondary: #6b7280;
    --color-border: #e5e7eb;
    --color-accent: #2563eb;
    --color-accent-hover: #1d4ed8;
    --color-error: #dc2626;
    --color-warning: #d97706;
    --color-success: #10b981;
    --color-info: #3b82f6;
    --color-white: #ffffff;
    --color-shadow: rgba(0, 0, 0, 0.08);
    --color-backdrop: rgba(0, 0, 0, 0.5);
  }

  /* Smooth scrolling for better UX */
  html {
    scroll-behavior: smooth;
  }

  .dark {
    --color-bg: #111827;
    --color-surface: #1f2937;
    --color-text: #f9fafb;
    --color-text-secondary: #9ca3af;
    --color-border: #374151;
    --color-accent: #60a5fa;
    --color-accent-hover: #93bbfd;
    --color-error: #f87171;
    --color-warning: #fbbf24;
    --color-success: #34d399;
    --color-info: #60a5fa;
    --color-white: #ffffff;
    --color-shadow: rgba(0, 0, 0, 0.3);
    --color-backdrop: rgba(0, 0, 0, 0.5);
  }
}

/* Message appear animation */
@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message-appear {
  animation: messageSlideIn 0.3s ease-out forwards;
}

/* Typing indicator animation - smooth pulsing dots */
@keyframes typingPulse {
  0%, 60%, 100% {
    opacity: 0.3;
    transform: scale(0.8);
  }
  30% {
    opacity: 1;
    transform: scale(1);
  }
}

.typing-dot {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: currentColor;
  animation: typingPulse 1.4s ease-in-out infinite;
}

.typing-dot:nth-child(1) {
  animation-delay: 0s;
}

.typing-dot:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
  animation-delay: 0.4s;
}

/* Skip-to-content link: visually hidden until focused */
.skip-to-content {
  position: absolute;
  top: -100%;
  left: 16px;
  z-index: 9999;
  padding: 8px 16px;
  border-radius: 0 0 6px 6px;
  font-size: 14px;
  font-weight: 500;
  text-decoration: none;
  color: var(--color-white);
  background-color: var(--color-accent);
  transition: top 0.15s ease;
}

.skip-to-content:focus {
  top: 0;
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}

/* Focus-visible outlines for keyboard navigation.
   Shows a consistent accent-colored ring ONLY when using keyboard (Tab/Shift+Tab),
   not on mouse click. Covers buttons, links, inputs, selects, textareas. */
*:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}

/* Inputs and textareas get a ring instead of outline for cleaner look */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-accent);
}

/* Touch device support: show action buttons that are normally hover-only.
   On devices without hover (phones, tablets), these buttons would be permanently
   invisible since there's no hover state. Show them at subtle opacity instead. */
@media (hover: none) {
  .touch-action-btn {
    opacity: 0.5 !important;
  }
}
